// Generated by CoffeeScript 1.6.1
var affpgcount, lowerlim, maxchar, pxtopt;

lowerlim = 8.5;

maxchar = 5360;

affpgcount = 1;

pxtopt = function(pixel) {
  return Math.round(pixel / ((.35146 / 25.4) * 96));
};

$(document).ready(function() {
  $(":input").focusout(function() {
    var ghost;
    ghost = $(":input[name=" + $(this).attr('name') + "-g]");
    ghost.val($(this).val());
    return ghost.css('font-size', $(this).css('font-size'));
  });
  $(":checkbox").click(function() {
    var ghost;
    ghost = $(":checkbox[name=" + $(this).attr('name') + "-g]");
    return ghost.prop("checked", $(this).prop("checked"));
  });
  $(":input").keydown(function() {
    var fontsize, _results;
    if (this.scrollHeight > $(this).outerHeight() || this.scrollWidth > $(this).outerWidth()) {
      fontsize = parseInt($(this).css("font-size"), 10);
      fontsize = pxtopt(fontsize);
      if (fontsize > lowerlim) {
        return $(this).css('font-size', (fontsize - 1) + "pt");
      } else {
        _results = [];
        while (this.scrollHeight > $(this).outerHeight() || this.scrollWidth > $(this).outerWidth()) {
          _results.push($(this).val($(this).val().substring(0, $(this).val().length - 1)));
        }
        return _results;
      }
    }
  });
  return $("[id^=aff-f-]").focusout(function() {
    var newpage, ss;
    if ($(this).val().length > maxchar) {
      ss = $(this).val().substring(5361);
      $(this).val($(this).val().substring(0, 5360));
      newpage = $(this).parent("[id^=aff-]").clone();
      newpage.child();
      $("#aff-1").after($("#aff-1").clone());
      return affpgcount++;
    }
  });
});
